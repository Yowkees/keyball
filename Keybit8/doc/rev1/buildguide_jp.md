# Build Guide for Keybit8

このガイドでは、Keybit8の組み立て手順を詳しく説明します。   

![01](images/_MG_8434-2.jpg)

## 【目次】

> **準備編**
 - [1. 部品確認](#1-部品確認)
   - [1-1. キット同梱品](#1-1-キット同梱品)
 - [2. 準備](#2-準備)
   - [2-1. 必要な工具](#2-1-必要な工具)
   - [2-2. ファームウェア](#2-2-ファームウェア)

> **実装**
 - [3. 実装・組み立て](#3-実装・組み立て)
   - [3-1. はんだ付けの前に](#3-1-はんだ付けの前に)
   - [3-2. 抵抗器の取り付け](#3-2-抵抗器の取り付け)
   - [3-3. ダイオードの取り付け](#3-3-ダイオードの取り付け)
   - [3-4. トランジスタアレイの取り付け](#3-4-トランジスタアレイの取り付け)
   - [3-5. LEDの取り付け](#anchor3-5)
   - [3-6. ProMicro・ピンヘッダ・ピンソケットの取り付け](#anchor3-6)
   - [3-7. タクトスイッチ・圧電スピーカーの取り付け](#3-7-タクトスイッチ・圧電スピーカーの取り付け)
   - [3-8. キースイッチの取り付け](#3-8-キースイッチの取り付け)

> **仕上げ編**
 - [4. 仕上げ](#4-仕上げ)
 - [5. 正規ファームウェアの書き込み](#5-正規ファームウェアの書き込み)
 - [6. Keybit8の使い方](#6-keybit8の使い方♪)

<a id="anchor1"></a>
## 1. 部品確認

まず最初にキットに同梱されている内容物一覧を確認し、内容物が全て入っているかご確認ください。

<a id="anchor11"></a>
### 1-1. キット同梱品

**Keybit8 標準キットの同梱品一覧**
| 部品名 | 回路番号 | 数量 | 備考 |
|:------|:-------:|:-----:|-----:|
| 抵抗器180Ω 茶灰茶金 | R1〜R9 | 9本 |  |
| 抵抗器2.7kΩ 赤紫赤金 | R10,R11 | 2本 |  |
| 抵抗器2kΩ 赤黒赤金 | R12 | 1本 |  |
| 赤色LED（透明色レンズ）| D1〜D8 | 8本 |  |
| 緑色LED（緑色レンズ）| D9 | 1本 |  |
| ガラス封入ダイオード | D10〜D17 | 8本 |  |
| ProMicro / USB type-Cコネクタ版 | U1 | 1本 |  |
| ProMicro用ピンヘッダ 12P 1.5mm | U1 | 2本 |  |
| ProMicro用ピンソケット 12P 3.5mm | U1 | 2本 |  |
| 8ch トランジスタアレイ TBD62783A | U2 | 1本 |  |
| 圧電スピーカー 13mm | LS1 | 1本 |  |
| サイレントリニア MX クリアスイッチ | SW1〜SW8 | 8個 |  |
| タクトスイッチ | SW9 | 1個 |  |
| キーキャップ |  | 8個 |  |
| クッションゴム |  | 4個 |  |
| USBケーブル 50cm |  | 1本 |  |
| Keybit8 基板 |  | 1枚 |  |
| 保護プレート |  | 1枚 | 教材用キットには同梱されていません |
| M2丸型スペーサー 11mm (ARB-2011E) |  | 4本 | 教材用キットには同梱されていません |
| M2ネジ L3.5mm 「FX-0235E」 |  | 8本 | 教材用キットには同梱されていません |

![02](images/_MG_8246.jpg)

<a id="anchor2"></a>
## 2. 準備

<a id="anchor2-1"></a>
### 2-1. 必要な工具

Keybit8の組み立てには下記の工具が必要です。すべて揃っているかご確認ください。

| 工具名 | 用途 |
|:-------|:-----|
| はんだごて| はんだ付け作業 |
| はんだ| 接続用 |
| ニッパー | 余分なピンの切断用 |
| ピンセット | 部品取り扱い用 |
| 0番＋精密ドライバー | 保護プレート組み立て用（教材用セットの場合は不要） |

![03](images/kb39_005.jpg)

<a id="anchor2-2"></a>
### 2-2. ファームウェア

Keybit8を動作させるには、ProMicroへのファームウェアの書き込みが必要です。  
すでにビルド済みのファームウェアを、[REMAP](https://remap-keys.app/)というウェブ上のキーボード管理ソフトにて簡単に書き込みができます。  
書き込みについてはこの後の[5章](#5-正規ファームウェアの書き込み)で製品版ファームウェアの書き込みについて詳しく説明しています。

<a id="anchor3"></a>
## 3. 実装・組み立て

ここからはんだ付けと組み立て作業を行なっていきます。  
はんだ付けパーツは全て基板の表面から差し込んで裏面にはんだ付けをしていきます。  
はんだ付けをした後、余分なピンはニッパーでカットしてください。

基板 表面
![04](images/_MG_8242.jpg)
基板 裏面  
![05](images/_MG_8257-2.jpg)

<a id="anchor3-1"></a>
### 3-1. はんだ付けの前に
はんだごての"こて先"は竹槍の先端のような形状のものだと平面にはんだを乗せたり、余分なはんだを"すくい取る"事が出来るので使いやすいです。

![06](images/kb39_027.jpg)

<a id="anchor3-2"></a>
### 3-2. 抵抗器の取り付け
それでは抵抗器を取り付けていきます。  
画像を参考にし、基板に記載されている抵抗値と一致する抵抗器を取り付けてください。  
複数ある抵抗器は色帯の向きを揃えて取り付けます。  

まずR12を取り付けます。  
次にR10とR11を取り付けてください。  
数の少ない抵抗器から取り付けることでミスがなくなります。

>**⚡️注意**:抵抗器の取り付け箇所を間違えると動作しなくなるので1個ずつ確認しながら取り付けを行ってください。

![07](images/_MG_8303.jpg)
    
画像のように抵抗器のピンを折り曲げて基板のスルーホールに差し込みます。
![08](images/_MG_8258.jpg)


基板裏面から抵抗器のピンを折り曲げて抵抗器が外れないように固定してからはんだ付けします。
![09](images/_MG_8277.jpg)
  
はんだ付けした後は余分なピンをニッパーでカットします。  
ピンをカットした後、はんだを再加熱すると、きれいに仕上がります。（気になる方は実施してください。）
![10](images/_MG_8285-2.jpg)

全部で12本の抵抗器を取り付けます。  
取り付けた抵抗器が抵抗値と一致しているか、色帯の向きは揃っているか最後に確認をしてください。
![11](images/_MG_8303.jpg)

<a id="anchor3-3"></a>
### 3-3. ダイオードの取り付け
次にダイオードを取り付けていきます。  
ダイオードは全部で8本取り付けます。  
抵抗器と同じようにピンを折り曲げてからスルーホールに差し込みます。  
![12](images/_MG_8309.jpg)

ダイオードの黒いライン（極性マーク）の向きを基板上の白いラインと合わせて取り付けます。
>**⚡️注意**:ダイオードの向きは8個全て同じ向きで取り付けるので、はんだ付けをする前に他のダイオードと同じ向きになっているか確認してからはんだ付けしください。   

![13](images/_MG_8311-3.jpg)

抵抗器と同様に差し込んだ後にピンを折り曲げて固定すると、はんだ付けしやすいです。
![14](images/_MG_8312-2.jpg)

はんだ付け後
![15](images/_MG_8315.jpg)

<a id="anchor3-4"></a>
### 3-4. トランジスタアレイの取り付け
トランジスタアレイを取り付けていきます。  
![16](images/_MG_8316.jpg)  

取り付ける前に余分なピンをカットしてから取り付けて、はんだ付けをするときれいに仕上がります。 
![17](images/_MG_8319-2.jpg)  

トランジスタアレイには半円形の切り欠きがあります。  
基板上の半円形マークと向きを合わせて差し込みます。  
![18](images/_MG_8330.jpg)  


>**⚡️注意**:トランジスタアレイが浮いた状態ではんだ付けをしてしまうと修正が難しいので、はんだ付けをする前にしっかりと差し込まれた状態か確認してからはんだ付けをしてください。（難しい場合はマスキングテープで固定をすると作業しやすいです。）  

画像はしっかりと差し込まれている状態。
![19](images/_MG_8327-3.jpg)

<a id="anchor3-5"></a>
### 3-5. LEDの取り付け
LEDを取り付けていきます。  
LEDにも極性があり、下記画像のようにLEDの切り欠き（平らな部分）と基板の円形マークの切り欠き部分に合わせて取り付けてください。
LEDには赤LED（透明レンズ）が8本と緑LED（緑レンズ）が1本あります。
緑LEDの取り付け箇所には「GREEN」の表記があるので間違えないように注意してください。
![20](images/_MG_8339.jpg)

![21](images/_MG_8341-2.jpg)

ピンが短い方が切り欠き方向になります。
![22](images/_MG_8345-2.jpg)

LEDも同様にはんだ付けが難しい場合はマスキングテープなどで固定してからはんだ付けしてください。  
はんだ付け後は余分なピンをカットしてください。 
![23](images/_MG_8349-2.jpg)

取り付け後イメージ
![24](images/_MG_8392-4.jpg)

<a id="anchor3-6"></a>
### 3-6. ProMicro・ピンヘッダ・ピンソケットの取り付け
後から差し込みづらくならないようにProMicro・ピンヘッダ・ピンソケットを全て基板に取り付けた状態ではんだ付けを行ってください。
ピンヘッダーをピンソケットに差し込むにはコツが必要です。  
ProMicro・ピンヘッダ・ピンソケットを全て基板に軽く差し込んだ状態でProMicroを押さえながら差し込むと、しっかり奥まで差し込むことができます。  
※ピンヘッダとピンソケットは、はんだ付け後も着脱可能な状態が正常です。  
![25](images/_MG_8367-3.jpg)  

ProMicroのはんだ付けをする際はProMicroの基板をマスキングテープで保護してからはんだ付けをしてください。  
はんだカスがProMicroの基板部分に付着して故障の原因になることがあります。
>⚠️ピンの数が多いパーツはまず1〜2箇所はんだ付けを行い、目視でパーツが浮いていないことを確認してから残りのはんだ付けも完了させます。

![26](images/_MG_8440-2.jpg)

<a id="anchor3-7"></a>
### 3-7. タクトスイッチ・圧電スピーカーの取り付け
タクトスイッチの取り付けを行います。  
タクトスイッチのピンをニッパーでカットしてから取り付けて、はんだ付けをするときれいに仕上がります。  
![27](images/_MG_8380-2.jpg)

仕上がりイメージ
![28](images/_MG_8388.jpg)

次に圧電スピーカーの取り付けを行います。  
余分なピンをカットしてから基板に差し込みます。  
ピンを折り曲げて固定してからはんだ付けを行います。  
![29](images/_MG_8390.jpg)

はんだ付け後、余分なピンをカットして必要であれば再加熱をしてきれいに仕上げます。
![30](images/_MG_8400.jpg)

<a id="anchor3-8"></a>
### 3-8. キースイッチの取り付け
キースイッチは8個全てを差し込んでから、はんだ付けをすると安定して取り付けられます。  
![31](images/_MG_8411.jpg)

ピンは折れ曲がりやすいので8個全て差し込んだ後にピンがスルーホールから出ているか確認してください。  
![32](images/_MG_8413.jpg)

スルーホールからはみ出した余分なピンはカットしてからはんだ付けをすると、きれいに仕上がります。  
![33](images/_MG_8415.jpg)

<a id="anchor4"></a>
## 4. 仕上げ
最後にキーキャップとクッションゴムを基板裏面の4つ角に取り付けたらKeybit8の完成です！  
お疲れ様でした。  

完成イメージ 表
![34](images/_MG_8434-2.jpg)  

完成イメージ 裏
![35](images/_MG_8433-3.jpg) 


<a id="anchor5"></a>
## 5. 正規ファームウェアの書き込み 
それでは最後に正規のファームウェアをProMicroに書き込みましょう。 

Keybit8は[Remap](https://remap-keys.app/configure)に対応していますので特別なソフトをインストールしなくてもファームウェアの書き込みとキーマップの変更が可能です。Remapの使用方法については[自キ温泉ガイドのサリチル酸](https://salicylic-acid3.hatenablog.com/entry/remap-manual)の記事に詳しく掲載されています。  

Keybit8をデバイスに接続します。   
Remapのトップページから「キーボードを探す」→ Keybit8を検索して選択 → 「ファームウェア」のタブを選択 → 「書き込み」を選択します。

Remapを使用するために[RemapカタログのKeybit8ファームウェアページ](https://remap-keys.app/catalog/LeRwa1B3uvwBCAaavuI7)を開き、Keybit8_viaのファームウェアをFLASH（書き込み）してください。


FLASH（書き込み）ボタンを押すと、書き込み方法の説明が表示されます。
USBケーブルを接続しているのにキーボードが認識されない場合は、はんだ付けしたRESETスイッチ（タクトスイッチ）を素早く2回押すと認識されます。

**ご自身でファームウェアをビルドする場合**   
Keybit8の最新ファームウェアは[Githubのリポジトリ](https://github.com/Yowkees/qmk_firmware/tree/master/keyboards/keybit8)にて公開しています。  
このkeybit8フォルダをお手持ちのQMK_Firmware/keyboardsへコピーして自由にキーマップ等を編集してmakeしてください。  


<a id="anchor6"></a>
## 6. Keybit8の使い方♪ 
   - [Remap](https://remap-keys.app/configure)で簡単にキーマップの確認・変更・書き込みが可能です。

   -  Keybit8はキーボードとして使用することはもちろん、8個のキーと9個のLEDと圧電スピーカーを使用してゲームを遊ぶことができます。  
   左側4つのキーを同時に長押しすることで「キー入力モード」と「ゲームモード」を切り替えられます。  
   ゲームモードでは3つのゲームで遊ぶことができます。  
   1. SW1+SW3の同時押しで「オルガン」  
   2. SW1+SW5の同時押しで「ルーレットゲーム」  
   3. SW1+SW7の同時押しで「タイピングゲーム」  
   以上の3つのゲームが正規のファームウェアに書き込まれています。   
   各ゲームを終了するには右側4つのキーを同時に長押ししてください。※各ゲームを終了しても引き続きゲームモードの状態は維持されています。  
   キー入力モードに切り替えたい場合は左側4つのキーを同時に長押ししてください。

   -  Keybit8はファームウェアを書き込んでキーボードとして使用する方法以外に[Arduino IDE](https://www.arduino.cc/en/software)を使用して自分でプログラムを書いてゲームなどを作成して楽しむことができます。

   - [Arduino IDE](https://www.arduino.cc/en/software)の使用方法  
   1.Arduino IDEをインストールする。  
   2.Arduino IDEを開いてボードの設定をする。（ツール → ボード → Arduino AVR Boards → Arduino Leonardo を選ぶ）  
   3.コードを書く  
   4.Keybit8をPCに接続してからツール → シリアルポート でKeybit8のポートを選ぶ。  
   5.Keybit8のリセットスイッチを素早く2回押す。  
   6.画面左上の →（マイコンボードに書き込む） ボタンを押す。
   画面下に「ボードへの書き込みが完了しました」と出れば成功。



   - Arduino IDEの入門としてLEDをチカチカさせるコードを記載します。ぜひお試しください。
      ```
      // LED を1秒ごとにチカチカさせる

      int ledPin = 9;  // 緑LEDのピン番号

      void setup() {
        pinMode(ledPin, OUTPUT);  // ピンを出力に設定
      }

      void loop() {
        digitalWrite(ledPin, HIGH);  // 点灯
        delay(1000);                 // 1秒待つ
        digitalWrite(ledPin, LOW);   // 消灯
        delay(1000);                 // 1秒待つ
      }
      // delay(1000) の数字を変えると点滅の速さが変わるので試してみてください。
      ```

以上でKeybit8のビルドガイドは終了です。  
Keybit8についてのご質問や不具合等についてはShiroganeLabオンラインショップの[お問い合わせ](https://shiroganelab.com/pages/contact)からお気軽にご連絡下さい。
なるべく早くご回答させていただきます。