# Build Guide for Keyball44

こちらは Keyball44 のビルドガイドになります。

English build guide for Keyball44 is [here](https://github.com/Yowkees/keyball/blob/main/keyball44/doc/rev1/buildguide_en.md).
  

![01](images/kb44_001.jpg)

## 【目次】

  - [１．部品確認](#１部品確認)
    - [1-1．キット同梱品](#1-1キット同梱品)
    - [1-2．組立前にお客様自身で準備いただく部品](#1-2組立前にお客様自身で準備いただく部品)
    - [1-3．組立後でも取り付けられる部品とオプション](#1-3組立後でも取り付けられる部品とオプション)
  - [２．準備](#２準備)
    - [2-1．必要な工具](#2-1必要な工具)
    - [2-2．ファームウェア](#2-2ファームウェア)
  - [３．実装](#３実装)
    - [3-1．はんだ付けの前に](#3-1はんだ付けの前に)
    - [3-2．ダイオードの取り付け](#3-2ダイオードの取り付け)
    - [3-3．LED（オプション）のはんだ付け](#3-3ledオプションのはんだ付け)
    - [3-4．キーソケットのはんだ付け](#3-4キーソケットのはんだ付け)
    - [3-5．ジャンパのはんだ付け](#3-5ジャンパのはんだ付け)
    - [3-6．TRRSソケット・タクトスイッチ・4連ピンソケット](#3-6TRRSソケットタクトスイッチ4連ピンソケット)
    - [3-7．ProMicroとOLEDのはんだ付け](#3-7promicroとOLEDのはんだ付け)
    - [3-8．ProMicroの書き込みと動作確認](#3-8promicroの書き込みと動作確認)
  - [４．トラックボール読み取り基板の組み立て](#４トラックボール読み取り基板の組み立て)
    - [4-1．センサーのはんだ付け](#4-1センサーのはんだ付け)
  - [５．L字コンスルーのはんだ付け](#５l字コンスルーのはんだ付け)
  - [６．トッププレートのカット（オプション）](#６トッププレートのカットオプション)
  - [７．組み立て](#７組み立て)
    - [7-1.トッププレートの組み立て](#7-1トッププレートの組み立て)
    - [7-2.ボトムプレートの組み立て](#7-2ボトムプレートの組み立て)
    - [7-3.保護プレートの取り付け](#7-3保護プレートの取り付け)
  - [８．トラックボール取り付け](#８トラックボール取り付け)
    - [8-1.ボール読み取り基板差し込み](#8-1ボール読み取り基板差し込み)
    - [8-2.トラックボールケースの組み立て](#8-2トラックボールケースの組み立て)
    - [8-3.トラックボールケース装着](#8-3トラックボールケース装着)
  - [９．総仕上げ](#９総仕上げ)
  - [１０．正規ファームウェアの書き込み](#１０正規ファームウェアの書き込み)
  - [１１．Keyballの使い方♪](#１１keyballの使い方)

<a id="anchor1"></a>
## １．部品確認

キットが届きましたらキット同梱品がすべて入っていたかご確認ください。

<a id="anchor11"></a>
### 1-1．キット同梱品

Keyball44は左右どちらかに１つ親指トラックボールを搭載できます。

Keyball44 キットの同梱品は下記になります。

もしProMicro用ピンヘッダ＋ピンソケットの代わりに12Pコンスルーが同梱されていた場合には、[【こちら】](https://github.com/Yowkees/keyball/blob/main/keyball44/doc/rev1/buildguide_jp.md#1-1%E3%82%AD%E3%83%83%E3%83%88%E5%90%8C%E6%A2%B1%E5%93%81)のビルドガイドをご利用ください。

| 名前 | 数 | 備考 |
|:-|:-|:-|
| ミドルPCB(左右) | １組 | |
| トップPCBプレート(左右) | １組 | |
| ミドルアクリルプレート(左右)| １組 |メインと親指部のセット |
| ボトムアクリルプレート(左右) | １組 | |
| ProMicro保護プレート | ２枚 | |
| トラックボール保持ケース白(上下) | １組 | |
| Φ2 セラミックボール | １個 | 予備用 |
| トラックボール読取り基板 | １枚 | |
| L字コンスルーピン(7ピン) | １個 | |
| トラックボール読取りIC | １個 | |
| 読取りIC用レンズ | １個 | |
| 平頭タップネジ M1.7 | ２本 | |
| 小頭タップネジ M1.7 | ２本 | |
| TRRSジャック | ２個 | |
| タクトスイッチ | ２個 | |
| ProMicro用ピンヘッダ＆ピンソケット(12ピン) | ４組 | |
| ダイオード（表面実装タイプ） | ５０個＋ | |
| Kailh PCBソケット CherryMX用 | ４４個＋ | |
| Kailh PCBソケット choc用| ５個 |親指ロープロ改造で使用 |
| OLEDモジュール | ２枚 | |
| OLED用4連ピンヘッダ  | ２つ | |
| OLED用4連ピンソケット | ２つ | |
| スペーサー M2 7mm | １４本＋ | |
| スペーサー M2 11mm | ４本 | |
| スペーサー M2 4mm | ４本 |親指ロープロ仕様で使用 |
| ネジ M2 3.5mm | ３６本＋ | |
| クッションゴム | １０個 | |

![02](images/kb44_007.jpg)

<a id="anchor1-2"></a>
### 1-2．組立前にお客様自身で準備いただく部品

| 名前 | 数 | 備考 |
|:-|:-|:-|
| ProMicro | ２個 | 安価なものやUSB Type-C対応のもの等選べます |
| CherryMX互換キースイッチ | ４４個 | 親指ロープロ仕様なら３９個 |
| ロープロファイルキースイッチ | ５個 | 親指ロープロ仕様とする場合のみ |
| 直径34mmトラックボール | １個 | 動作確認で使用します |
| TRS(3極)ケーブル | １本 | TRRS(4極)ケーブルでも可 |
| Micro USBケーブル | １本 | ご購入いただいたProMicroに対応するもの |

![03](images/kb44_003.jpg)

<a id="anchor1-3"></a>
### 1-3．組立後でも取り付けられる部品とオプション

| 名前 | 数 | 備考 |
|:-|:-|:-|
| キーキャップ | ４４個 | 1u ４４個 |
| ロープロファイルキーキャップ | ５個 | 親指ロープロ仕様のみ　1u ５個 |
| [YS-SK6812MINI-E](https://shirogane-lab.com/products/%E3%83%95%E3%83%AB%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%81%E3%83%83%E3%83%97led-sk6812mini-e) | ５９個 | ※SK6812MINIは使用できません |

<a id="anchor2"></a>
## ２．準備

<a id="anchor2-1"></a>
### 2-1．必要な工具

Keyball44の組み立てには下記の工具が必要です。

| 名前 |
|:-|
| はんだごて(LEDを実装する場合は温度調整可能なもの) |
| はんだ(LEDを実装する場合は低融点のものが有効) |
| ０番＋精密ドライバー |
| ピンセット |
| カッター |
| 150番手くらいの紙やすり（親指chocロープロ仕様とする場合のみ） |

![05](images/kb44_005.jpg)

<a id="anchor2-2"></a>
### 2-2．ファームウェア

Keyball44を動作させるには、ご購入いただいたProMicroへのファームウェアの書き込みが必要です。
すでにビルド済みのファームウェアが、[REMAP](https://remap-keys.app/)というウェブ上のキーボード管理ソフトにて書き込みが簡単に行えるように準備されています。

書き込みについてはこの後の[3-8章](#3-8promicroの書き込みと動作確認)でテスト用のファームウェアの書き込み、[１０章](#１０正規ファームウェアの書き込み)で製品版ファームウェアの書き込みについて詳しく説明しています。

<a id="anchor4"></a>
## ３．実装

ここからはんだ付け作業に入ります。  
PCBはリバーシブルになっているので、最初にどちらを左手用/右手用にするか決めます。  

赤丸で示した、PCBが欠けている部分にトラックボールがつきます。  
右手親指でトラックボールを操作するなら下写真のような配置になります。  

![20](images/kb44_010.jpg)

左手親指でトラックボールを操作する場合は下写真のような配置です。 

![21](images/kb44_011.jpg)

本ビルドガイドでは右手にトラックボールをつける仕様で説明します。  
下記のようにPCBを置き、ミス防止のため表面にマスキングテープを貼ります。

![22](images/kb44_012.jpg)

<a id="anchor3-1"></a>
### 3-1．はんだ付けの前に
半田ごての”こて先”は竹槍の先端のような形状のものだと平面にはんだを乗せたり、余分なはんだを”すくい取る”事が出来るので使いやすいです。

![27](images/kb44_027.jpg)

<a id="anchor3-2"></a>
### 3-2．ダイオードの取り付け
それではダイオードを順にはんだ付けしていきます。  
ダイオードはすべて【裏面】にはんだ付けします。  
  
ダイオードのシルクマークは下写真の矢印で示したマークで、左右合計で45個あります。  
ダイオードには極性がありますので、正しい向きで取り付けてください。向きは部品上の直線とシルクマーク内の矢印の先についている直線が一致する方向です。  
  
下写真をよく見て向きを確認してください。  
同一基板上のダイオードの向きはすべて同じ向きで配置されています。半田付けを進める中で回りのダイオードと同じ向きになっているか確認しながら行ってください。

![25](images/kb44_014.jpg)
  
ダイオードのシルクには下記写真の赤で示すような黒点を付けました。ですので、ダイオードを半田付け後にも極性確認を行う事ができます。

![26](images/kb44_015.jpg)

半田付けの前にダイオードの向きを揃え、ダイオードの数を数えておけば逆付けや付け忘れを防止できます。

トラックボールが付く側基板の近くに22個のダイオードを並べ、トラックボール無し側基板の近くに24個のダイオードを並べました。

![27](images/kb44_019.jpg)

それでは半田付け開始です。まず、ダイオード用パッドの片側にはんだを盛ります。

![28](images/kb44_020.jpg)

ピンセットでダイオードを掴み、事前に盛ったはんだを溶かしながらダイオードを固定します。

![30](images/kb44_028.jpg)

基板を180度回転させてダイオードの反対側の足へもはんだを流します。
最後に両方の足をこて先で触り、ダイオードが脱落しなければ両足とも半田付けされています。

![反対の足も半田付け](images/kb44_029.jpg)

左右合計で４６個のダイオードを取り付けます。

下写真の青丸部のダイオードを付け忘れることが多いのでご確認ください。

![37](images/kb44_030.jpg)

<a id="anchor3-3"></a>
### 3-3．LED（オプション）のはんだ付け
LED（YS-SK6812MINI-E）はオプションになります。キットには含まれませんので、[こちら](https://shirogane-lab.com/products/%E3%83%95%E3%83%AB%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%81%E3%83%83%E3%83%97led-sk6812mini-e)等で入手してください。

左右で計５９個取り付け可能です。  

ただしLEDは非常に熱に弱く、こて先温度を270℃程度に調整して行ってください。また銀入りはんだ等の融点の低いはんだを使用すると良いです。

こて先の温度が低いためパッドに熱が伝わらず半田がテンプラ（接続不良）しやすいです。  
LED無しでもキーボードは使用できますし、すべてのLEDを点灯させるのは難易度が高いのでまずはLEDなしで完成させることをおすすめします。後からでもLEDを追加できます。 

LEDを半田付けする場合にはこのタイミングで作業すると作業性が良いと思います。

LEDはすべて【裏面】にはんだ付けします。 
  
YS-SK6812MINI-Eの４ピンのうち切り欠きがある足と、マーキングされているパッドを合わせてLEDを載せて半田付けします。

LEDには上向きに付けるものと下向きに付けるものが混在しますが、下写真のようにピンの切り欠きとマーキングを合わせてさえいれば、上下は自動的に合います。

一度に４ピンすべてのはんだ付けをすると部品の温度が上がり壊れやすいので、２ピンづつくらいで時間をあけてはんだ付けしてください。そのために１０個ほどのLEDを一度に載せて、一度はんだを当てたら次のLEDの半田付けに移るようにします。こうすると１つのLEDに熱を加え続けることを防げます。

![80](images/kb44_070.jpg)

すべてのLEDが半田付けできましたら、まだこのタイミングではLEDの点灯確認が出来ませんので、次の工程を進めます。

![82](images/kb44_073.jpg)

<a id="anchor3-4"></a>
### 3-4．キーソケットのはんだ付け
キーソケットはダイオードと同様にすべて【裏面】に半田付けします。
キーソケットをシルクマークと形状が合うようにセットしてはんだ付けします。  
シルクからはみ出すようであれば方向が違います。正しい向きを下記写真で確認してください。

![85](images/kb44_075.jpg)

親指ロープロ仕様にて組み立てる場合には、親指キーとなる箇所（左右で５キー）にロープロファイル用ソケットを半田付けして下さい。このロープロソケットにも向きがあります。

下記写真にて方向を確認してください。黒い樹脂部分が八角形に近くなっている端子がスイッチの真ん中付近にくる方向が正解です。

![85](images/kb44_077.jpg)

まずPCBソケットを正しい向きに差し込んでから半田付けを行います。

![86](images/kb44_078.jpg)

ソケットの端子を温めながら、赤矢印の方向（向こう側）から半田を溶かします。    

![87](images/kb44_079.jpg)

この時に、下写真の緑矢印部分の端子と基板の間にある隙間に注目します。ここから半田が染み出してくるのが見えれば、テンプラ無く確実に半田付け出来ています。これを毎回確認してください。

1つ目の端子を半田付けしたときにPCBソケットが浮くことがあるので、もう一度半田を溶かして、ピンセットでソケットを押さえつけてください。

![88](images/kb44_080.jpg)

基板を180度回転させて反対側の端子も半田付けします。

左右合わせて４４個はんだ付けして完了です。親指キーのPCBソケットはCherryMX互換ソケットかロープロソケットのどちらかだけでも構いません。写真では両方付けています。

![89](images/kb44_081.jpg)
<a id="anchor3-5"></a>
### 3-5．ジャンパのはんだ付け
OLEDモジュールやトラックボール等を動作させるために合計１３箇所のジャンパをショートさせる必要があります。

ジャンパの半田付けは __【裏面のみ】__ に行います。  

まずはOLED用のジャンパをショートさせます。

"Back Side Only"の表示があり、左右の基板に各【４個ずつ】あります。  
パッドをこて先で温めてから、はんだを溶かすとブリッジできます。

![41](images/kb44_036.jpg)

半田付けに自信のない方やブリッジ作業が苦手という方は、いきなりブリッジさせようとせずに、下写真のようにまずは8個のパッドに半田を付ける事を行ってみてください。

ここに半田を追加することで、楽にブリッジさせられると思います。

はんだの鮮度が落ちる（何度も温め直す）と表面張力が落ちてうまくブリッジできません。この場合には新しい半田をどんどん追加して表面張力を復活させてください。

![42](images/kb44_034.jpg)

次にトラックボール用信号線のジャンパをショートさせます。
下写真の位置にある4個のジャンパを写真のように半田付けしてください。これも【裏面】のみ行います。

![43](images/kb44_037.jpg)


最後に左手判定ジャンパをショートさせます。
左手とする側の基板の小指キー付近に下写真のようにLEFTの表示があるジャンパが１つあると思います。これも【裏面】のみショートさせてください。

![44](images/kb44_038.jpg)

すべてのジャンパの半田付けが完了したのが下写真です。

４つの青丸部がすべて半田付けしてあるか確認してください。

![47](images/kb44_039.jpg)

<a id="anchor3-6"></a>
### 3-6．TRRSソケット・タクトスイッチ・4連ピンソケット
下記写真の部品をのはんだ付けします。  
今度はすべて【表面　TOP】に取付けますのでご注意ください。  

![51](images/kb44_040.jpg)

部品が浮いてしまうのが心配であれば、マスキングテープ等で固定してはんだ付けします。
なお、ピンソケットの半田付けで半田が多すぎる（作業時間が長すぎる）と、ピンソケット内部にはんだが流れ込み、ピンヘッダが刺さらなくなることがあります。
半田がスルーホールに吸い込まれているように感じたら、その端子の半田付けは終了し、次の端子へ移ってください。

![52](images/kb44_041.jpg)

すべて取り付けると下写真のようになります。

![53](images/kb44_042.jpg)

部品は【表面】から挿入して、【裏面】を下写真のように半田付けしてください。

![54](images/kb44_044.jpg)


<a id="anchor3-7"></a>
### 3-7．ProMicroとOLEDのはんだ付け
ProMicroはProMicro用ピンソケットとピンヘッダを使用してはんだ付けすることで、ProMicroの故障時に交換が容易になります。
【ProMicroに同梱されているピンヘッダーは使用しません】

もしProMicro用ピンヘッダ＋ピンソケットの代わりに12Pコンスルーが同梱されていた場合には、[【こちら】](https://github.com/Yowkees/keyball/blob/main/keyball44/doc/rev1/buildguide_jp.md#3-7promicro%E3%81%A8OLED%E3%81%AE%E3%81%AF%E3%82%93%E3%81%A0%E4%BB%98%E3%81%91)のビルドガイドをご利用ください。

まず12Pピンソケットを基板【表面】に差し込みます。

シルクの四角枠に合うようにコンスルーを差し込んでください。シルクの黒枠がコンスルーとずれているようであれば差し込む穴が間違っています。

![61](images/kb44_052.jpg)

ピンソケットが浮いたり脱落しないようにマスキングテープ等で固定します。

![62](images/kb44_054.jpg)

基板をひっくり返して【裏面】に半田付けし、ピンソケットを固定します。
部品が浮いてしまうのが心配であれば、マスキングテープ等で固定してはんだ付けします。
なお、ピンソケットの半田付けで半田が多すぎる（作業時間が長すぎる）と、ピンソケット内部にはんだが流れ込み、ピンヘッダが刺さらなくなることがあります。
半田がスルーホールに吸い込まれているように感じたら、その端子の半田付けは終了し、次の端子へ移ってください。

![63](images/kb44_055.jpg)

半田付けできたら、12Pピンソケットに12Pピンヘッダを差し込みます。【ProMicroに同梱のピンヘッダーは使用しません】ピンソケットと同じ袋に入っているピンヘッダーを使用します（部品の高さが違います）】きちんと奥まで差し込んでください。

![64](images/kb44_057.jpg)

差し込んだピンヘッダにProMicroを挿入します。  
ProMicro側も下写真のようにはんだ付けします。

![65](images/kb44_060.jpg)

左右の基板には標準でOLEDが搭載できます。  
【OLEDに同梱のピンヘッダーは使用しません】
4連ピンソケットにピンソケットと同じ袋に入っている4連ピンヘッダを挿入してOLEDモジュールを載せます。
そして、4ピンのうちのひとつだけをはんだ付けします。  

１つだけ半田付けしたピンの半田を溶かしながらOLEDモジュールを上から押して浮かないようにします。またProMicroと並行になるように調整すると見栄えが良くなります。

![70](images/kb44_062.jpg)

位置が決まったら残り3ピンをはんだ付けします。


<a id="anchor3-8"></a>
### 3-8．ProMicroの書き込みと動作確認
それではまずテスト用のファームウェアをProMicroに書き込みましょう。

テスト用ファームウェアは動作確認しやすいようにキーマップが簡潔なのと、RGB LEDが赤→緑→青と順に点灯するため、はんだ不良を発見しやすいです。
今回はLEDはんだ付けを見送っている場合など、テスト用ファームウェアが必要無いと思われる方は[１０章](#１０正規ファームウェアの書き込み)の正規のファームウェアをここで書き込んでも構いません。  
  

Keyball44のファームウェアは、トラックボールを右手と左手のどちらに載せた場合でもファームウェアは共通です。[REMAPに登録してあるKeyball_test.hex](https://remap-keys.app/catalog/tAJ9Htme4oNabUkx4832/firmware) を書き込み(FLASH)してください。上記リンクにあるFLASHボタンを押すと、書き込み方法の説明が表示されます。
USBケーブルを接続しているのにキーボードが認識されない場合は、半田付けしたRESETスイッチを素早く2回押すと認識されると思います。

※必ず左右両方のPro Microに同じhexファイルを書き込んでください。

  Keyball44のファームウェアを直接編集してご自身でビルドしたい場合は、 [こちらのリポジトリ](https://github.com/Yowkees/keyball/tree/main/qmk_firmware/keyboards/keyball)にソースファイルがありますのでダウンロードしてご活用ください。


書き込みが完了したら下写真のようにキースイッチのパッドをピンセットでショートして動作確認します。テキストエディタに文字が入力されることを確認します。キーボードの左右が反転している場合がありますが、現状は問題ありません。ひとまず何かしらの文字が入力されてProMicroが動作しているかだけご確認ください。すべてのキーを試す必要はまだありません。
早い段階で動作確認をすることで問題の切り分けが楽になります。

また、このタイミングでLEDの点灯を確認します。
LEDは直列に配線されておりナンバーが割り振ってあります。もし1番～12番のLEDまでは点灯して、13番以降が点灯しない場合、12番もしくは13番のLEDの半田付けに問題があります。半田付けをやり直したり、LEDを交換してみてください。

※ファームウェアの書き込みは必ず左右両方のPro Microに対して行ってください。

![75](images/kb44_067.jpg)

<a id="anchor4"></a>
## ４．トラックボール読み取り基板の組み立て
下写真の基板（以下、ボール基板）と光学センサーを準備します。

※センサーや基板の品質確認のため、はんだ付け済のボール基板が届く場合があります。その時にはこの工程は飛ばして、５章のL字コンスルーのはんだ付けに進んでください。

![90](images/kb44_090.jpg)  

<a id="anchor4-1"></a>
## 4-1．センサーのはんだ付け  

センサーICはボール基板の部品が実装されていない裏面から差し込みます。  
センサーの極性を間違えると、修理がとても大変です！正しい向きで、正しい方向から挿入しているかしっかりと確認してから半田付けしてください！
ICの１ピンを示すくぼみと基板の【1pin】のシルクを合わせます。

![91](images/kb44_091.jpg)

ICを裏から見るとこのような方向です。表面実装部品が実装されている表面側（Keyballロゴの無い面側）から全ピンをはんだ付けしてください。

![92](images/kb44_092.jpg)

ピンセットを使って保護シール【２枚】をはがします。

![93](images/kb44_093.jpg)

保護シールをはがした面側にセンサーレンズを取り付けます。レンズには方向があります。方向が違うとレンズの細いピン2本が折れてしまう恐れがあるため方向をしっかりとご確認ください。  
レンズ手前に下写真矢印のような突起があり、これが上側にくるように取り付けます。

![95](images/kb44_095.jpg)

レンズとICの方向が合えば、レンズのピン2本がICに無理なく差し込めるはずです。ゆっくりと差し込んでください。

![94](images/kb44_094.jpg)

<a id="anchor5"></a>
### ５．L字コンスルーのはんだ付け
次に7ピンのL字コンスルーをトラックボールを搭載する基板の【表面】に取付けます。

L字コンスルーにも方向があります。
ピンがU字型になっていない方をミドル基板に差し込んで半田付けします。

![96](images/kb44_083.jpg)

部品が浮かないようにマスキングテープ等を貼って裏面からはんだ付けしてください。

![97](images/kb44_084.jpg)

裏面から7ピンの半田付けをします。

![97](images/kb44_085.jpg)


以上ではんだ付け作業は完了です。

余談ですがはんだごての電気を落とす前に、こて先にたっっぷりとはんだを付けておきましょう。次回使用するときにこのはんだを落とせば、ピカピカのこて先で作業を再開できますよ！

![100](images/kb44_096.jpg)

<a id="anchor6"></a>
## ６．トッププレートのカット(オプション)  

Keyball44は親指キー5個をchocロープロファイルスイッチに切り替えることが可能です。

その場合トッププレートのミシン目を切り離す必要があります。

切り取るためには、カッターを使用して表面と裏面のミシン目部分に切り込みを入れてから折って切り離します。


親指キーを通常のCherry MXスイッチにする場合には基板を切り離す必要はありません。

基板を切り離しても、親指キーにはchocスイッチとMXスイッチどちらでも取り付けることができますので両方の使い心地を試して見たい場合はここで切り離しておくことをお勧めします。


![101](images/kb44_100.jpg)

切り離した断面は150番手くらいの紙やすりで整えてください。

![102](images/kb44_102.jpg)

<a id="anchor7"></a>
## ７．組み立て 

<a id="anchor7-1"></a>
### 7-1.トッププレートの組み立て  

トッププレートの【裏面】に7mmスペーサをねじ止めします。

親指をロープロファイル仕様で組み立てる場合には、親指キー用トッププレートには4mmスペーサを取り付けます。

本ビルドガイドでは親指をchocロープロファイルスイッチとした場合で説明します。

![112](images/kb44_107.jpg)

次に左右のミドル基板に11mmスペーサ４本をねじ止めします。

この作業を忘れてボトムプレートを取り付けてしまうと、11mmスペーサがねじ止めできなくなってしまうのでご注意ください。

![115](images/kb44_104.jpg)

トッププレートの四隅と親指用プレートにキースイッチをはめ込みます。

こうしておくとプレート同士の位置決め精度が上がります。

![113](images/kb44_108.jpg)

トッププレートとミドルアクリルプレートのねじ穴を合わせ、プレート同士を重ねます。

![114](images/kb44_110.jpg)

次に半田付けしたミドル基板もネジ穴を合わせ、キースイッチの端子がしっかりキーソケットに入ることを確認しながら重ねます。

![114](images/kb44_112.jpg)

<a id="anchor7-2"></a>
### 7-2.ボトムプレートの組み立て  

アクリルボトムプレートの保護シートを剥がし、本体裏面に重ねてねじ止めします。

次にボトムプレートにクッションゴムを張り付けてください。クッションゴムを張り付ける位置は自由ですが下写真を参考にしてみてください。

![114](images/kb44_116.jpg)

<a id="anchor7-3"></a>
### 7-3.保護プレートの取り付け  

アクリル保護プレートを11mmスペーサにねじ止めします。

トラックボール有り側も無し側も保護プレートの形状は共通です。表裏もありません。

![116](images/kb44_105.jpg)  

<a id="anchor8"></a>
## ８．トラックボール取り付け 

<a id="anchor8-1"></a>
### 8-1.ボール読み取り基板差し込み  

組み立てたトラックボール読み取り基板を７ピンコンスルーへ差し込みます。わかりやすいように斜めにしていますが、垂直にして差し込みます。

![120](images/kb44_114.jpg)

ボール基板が垂直に立ちました。

![121](images/kb44_115.jpg)

<a id="anchor8-2"></a>
### 8-2.トラックボールケースの組み立て  

トラックボールケースには事前にセラミックボール3個が固定されています。万が一セラミックボールが脱落している場合にはお手数ですが予備のセラミックボールを適当なボンドで固定してください。  
セラミックボールの予備は今後ボールを紛失した時のために保管しておいてください。

ケースを振ってみて、セラミックボールが脱落しないか確認してください。

![122](images/kb44_122.jpg)

ケース下の穴へ、ケース上のピン２本が挿入できます。  
上下からゆっくり力を入れて結合します。（ぴったりと結合しなくてもこの後のねじ絞めでくっつきますので大丈夫です。）

![123](images/kb44_123.jpg)

M1.7のタッピングねじをつけます。キットにはねじ頭が【小さいねじ】と【平らなねじ】が同梱されていますが、そのうちの【頭の小さいねじ】を使用します。

![124](images/kb44_124.jpg)

ケース裏から見て、この２個所をねじ止めします。締め付けすぎにご注意ください。

![125](images/kb44_125.jpg)

<a id="anchor8-3"></a>
### 8-3.トラックボールケース装着  

完成したケースを本体に取付けます。ケース裏側のセンサー収納部にボール基板が入ります。  
矢印で示すボール基板がケース中央くらいにくるようにしながら、上からゆっくりとはめます。引っ掛かりがある場合、無理に押し込まず、一度引き抜いて再度入れ直してください。

それほど力を入れなくても最後まで入るはずです。

![126](images/kb44_127.jpg)

本体裏から確認するとメイン基板とボール基板の間に、矢印で示すような隙間が出来ている場合があります。

![128](images/kb44_129.jpg)

その時は、軽～くケース手前（指マークの方向）から押します。力を入れすぎるとL字コンスルーが破損する可能性があるので、軽く押してください。  
下写真のように隙間がなくなれば、青丸部のねじ穴が合うと思います。

![129](images/kb44_130.jpg)

キットに同梱のM1.7トルクスねじの【頭が平らなねじ】２本を本体裏から絞めます。

この時ボール保持ケースが回転しないように指で抑えながらねじを絞めてください。

![130](images/kb44_132.jpg)

<a id="anchor9"></a>
## ９．総仕上げ 

完成間近です！お好みのキースイッチをはめ込んでください。

最後に34mmトラックボールをケースに押し込んで完成です！  

お疲れ様でした。  

![132](images/kb44_135.jpg)

![keyball44完成品](images/kb44_136.jpg)

<a id="anchor10"></a>
## １０．正規ファームウェアの書き込み 

それでは最後に正規のファームウェアをProMicroに書き込みましょう。

Keyball44は[ReMAP](https://remap-keys.app/configure)に対応していますのでと特別なソフトをインストールしなくてもファームウェアの書き込みとキーマップの変更が可能です。Remapの使用方法については[自キ温泉ガイドのサリチル酸](https://salicylic-acid3.hatenablog.com/entry/remap-manual)の記事に詳しく掲載されています。  

ReMAPを使用するために下記のVIA対応ファームウェアを書き込んでください

   - Keyball44 VIA対応版ファームウェア [REMAPカタログのKeyball44ファームウェアページ](https://remap-keys.app/catalog/tAJ9Htme4oNabUkx4832/firmware)を開き、Keyball44_viaのファームウェアをFLASHしてください。


書き込みは[3-8章](#3-8promicroの書き込みと動作確認)でも書いた通り、FLASHボタンを押すと、書き込み方法の説明が表示されます。
USBケーブルを接続しているのにキーボードが認識されない場合は、半田付けしたRESETスイッチを素早く2回押すと認識されると思います。

※必ず左右両方のPro Microに同じhexファイルを書き込んでください。

■ご自身でファームウェアをビルドする場合  
Keyball44の最新ファームウェアは[Githubのリポジトリ](https://github.com/Yowkees/keyball/tree/main/qmk_firmware/keyboards/keyball)にて公開しています。このkeyballフォルダをお手持ちのQMK_Firmware/keyboardsへコピーして自由にキーマップ等を編集してmakeしてください。  


<a id="anchor11"></a>
## １１．Keyballの使い方♪ 
   - トラックボールはレイヤー３に切り替わっている間は上下左右スクロールに変わります
   - [ReMAP](https://remap-keys.app/configure)に対応していますので、簡単にキーマップの確認・変更・書込みが可能です
   - USBケーブルは左右どちらに差しても使用できます。ただしキーマップはUSBケーブルを差した側のProMicroへ書き込まれるため、初めて差し替えた場合にはキーマップを見直してください
   - Keyballシリーズ用に特別に用意されたキーコードがレイヤー３に配置されています。トラックボールをスクロールに変化させたり、カーソル速度やスクロール速度変更に使用できます。

| キーコード | Remap上での表記 | 説明 |
|:-|:-|:-|
| `KBC_RST` | `0x5DA5` | Keyball設定のリセット |
| `KBC_SAVE` | `0x5DA6` | 現在のKeyball設定をEEPROMに保存します |
| `CPI_I100` | `0x5DA7` | CPIを100増加させます(最大:12000) |
| `CPI_D100` | `0x5DA8` | CPIを100減少させます(最小:100) |
| `CPI_I1K` | `0x5DA9` | CPIを1000増加させます(最大:12000) |
| `CPI_D1K` | `0x5DAA` | CPIを1000減少させます(最小:100) |
| `SCRL_TO` | `0x5DAB` | タップごとにスクロールモードのON/OFFを切り替えます |
| `SCRL_MO` | `0x5DAC` | キーを押している間、スクロールモードになります |
| `SCRL_DVI` | `0x5DAD` | スクロール除数を１つ上げます(max D7 = 1/128)←最もスクロール遅い |
| `SCRL_DVD` | `0x5DAE` | スクロール除数を１つ下げます(min D0 = 1/1)←最もスクロール速い |


以上でKeyball44のビルドガイドは終了です。
Keyball44についてのご質問や不具合等についてはGithubのリポジトリ、[Yowkees/keyballのDiscussions](https://github.com/Yowkees/keyball/discussions)へご投稿ください。なるべく早くご回答させていただきます。

―謝辞―  
Keyball44のファームウェアは、[KoRoN@香り屋様](https://www.kaoriya.net/)の多大なるご協力のおかげでトラックボールの動作が大幅にスムーズになったことに加え、メモリ容量の大幅な削減によりとてもたくさんのLEDアクションが楽しめます。このような素晴らしいファームウェアをスピーディに作成していただき、この場を借りて深くお礼させていただきます。本当にありがとうございました。
　@Yowkees
